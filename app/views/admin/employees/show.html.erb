<div class="bg-body-light">
    <div class="content content-full">
        <div class="d-flex flex-column flex-sm-row justify-content-sm-between align-items-sm-center">
            <h3 class="flex-sm-fill font-size-h2 font-w400 mt-2 mb-0 mb-sm-2">Empleados</h3>
            <nav class="flex-sm-00-auto ml-sm-3" aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <%= link_to('Empleados', admin_employees_path, class: 'breadcrumb-item')%>
                    <li class="breadcrumb-item active" aria-current="page">Información del Empleado</li>
                </ol>
            </nav>
        </div>
    </div>
</div>
<div class="row form_fieldset">
  <div  class="col-12 mt-4 mb-4">
    <legend>Información General</legend>
  </div>
  <div class="col-md-4 col-sm-6  mb-2 mt-2">
  	<strong>Nombre:</strong>
    <p><%= @employee.name %></p>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Tipo de Identificació:</strong>
    <p><%= @employee.id_type %></p>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Número de Identificación:</strong>
    <p><%= @employee.identification %></p>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Sexo:</strong>
    <p><%= @employee.gender %></p>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Fecha de Nacimiento:</strong>
    <p><%= @employee.birthday %></p>
  </div>
</div>

<div class="row form_fieldset mb-2">
  <div  class="col-12 mt-4 mb-4">
    <legend>Información de Contacto</legend>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Teléfono:</strong>
    <p><%= @employee.phone %></p>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Teléfono Adicional:</strong>
    <p><%= @employee.phone_1 %></p>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Contacto de Emergencia:</strong>
    <p><%= @employee.emergency_contact %></p>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Número de Emergencia:</strong>
    <p><%= @employee.emergency_number %></p>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Provincia:</strong>
    <p><%= @employee.province %></p>
  </div>
  <div class="col-md-4 col-sm-6 mt-2">
    <strong>Cantón:</strong>
    <p><%= @employee.canton %></p>
  </div>
  <div class="col-md-4 col-sm-6 mt-2">
    <strong>Distrito:</strong>
    <p><%= @employee.district %></p>
  </div>
  <div class="col-md-4 col-sm-6 mt-2">
    <strong>Otras Señas:</strong>
    <p><%= @employee.other %></p>
  </div>
</div>

<div class="row form_fieldset mb-2">
  <div  class="col-12 mt-4 mb-4">
    <legend>Información Financiera</legend>
  </div>
  <div class="col-md-3 col-sm-6 mb-2 mt-2">
    <strong>Método de Pago:</strong>
    <p><%= @employee.payment_method %></p>
  </div>
  <div class="col-md-3 col-sm-6 mb-2 mt-2">
    <strong>Banco:</strong>
    <p><%= @employee.bank %></p>
  </div>
  <div class="col-md-3 col-sm-6 mb-2 mt-2">
    <strong>Número de Cuenta:</strong>
    <p><%= @employee.account %></p>
  </div>
  <div class="col-md-3 col-sm-6 mb-2 mt-2">
    <strong>Cuenta Registrada:</strong>
    <% if @employee.registered_account %>
      <p>Si</p>
    <% else %>
      <p>No</p>
    <% end %>
  </div>
  <div class="col-md-3 col-sm-6 mb-2 mt-2">
    <strong>Número de SCCSS:</strong>
    <p><%= @employee.ccss_number %></p>
  </div>
  <div class="col-md-3 col-sm-6 mb-2 mt-2">
    <strong>Propietario de la Cuenta:</strong>
    <p><%= @employee.account_owner %></p>
  </div>
  <div class="col-md-3 col-sm-6 mb-2 mt-2">
    <strong>Identificación del Propietario:</strong>
    <p><%= @employee.account_identification %></p>
  </div>
</div>

<div class="row form_fieldset">
  <div  class="col-12 mt-4 mb-4">
    <legend>Información de Contratación</legend>
  </div>
  <div class="col-md-4 col-sm-6 mt-2">
    <strong>Cargos en la Empresa:</strong>
    <% @employee.positions.each do |position| %>
      <p><%= position.name %></p>
    <% end -%>
  </div>
  <div class="col-md-4 col-sm-6 mt-2">
    <strong>Puestos:</strong>
    <% @employee.stalls.each do |stall| %>
      <p><%= stall.name %></p>
    <% end -%>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Pago del Seguro:</strong>
    <p><%= @employee.social_security %></p>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Víaticos:</strong>
    <% if @employee.daily_viatical == "not" %>
      <p>No</p>
    <% else %>
      <p>Sí</p>
    <% end %>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Seguro Completo:</strong>
    <% if @employee.ccss_type == "not" %>
      <p>No</p>
    <% else %>
      <p>Sí</p>
    <% end %>
  </div>
  <div class="col-md-4 col-sm-6 mb-2 mt-2">
    <strong>Activo:</strong>
    <% if @employee.active %>
      <p>Sí</p>
    <% else %>
      <p>No</p>
    <% end %>
  </div>
</div>

<div class="row form_fieldset">
  <div  class="col-12 mt-4 mb-4">
    <legend>Historial de Contrataciones</legend>
  </div>
  
  <% if @employee.entries %>
    <% @employee.entries.each do  |entry| %>
      <div class="col-md-3 col-sm-6 mt-2">
        <strong>Fecha de Contratación:</strong>
        <p><%= entry.start_date %></p>
      </div>
      <div class="col-md-3 col-sm-6 mt-2">
        <strong>Fecha de Finalización:</strong>
        <p><%= entry.end_date %></p>
      </div>
      <div class="col-md-3 col-sm-6 mt-2">
        <strong>Documento:</strong><br>
        <% if entry.document %>
          <a href="<%= entry.document_url %>" target="_blank" >Click Aquí</a>
        <% end %>
      </div>
      <div class="col-md-3 col-sm-6 mt-2">
        <strong>Motivo de Salida:</strong>
        <p><%= entry.reason_departure %></p>
      </div>
    <% end %>
  <% end %>
</div>

<div class="row form_fieldset mb-4">
  <div  class="col-12 mt-4 mb-4">
    <legend>Información de Vacaciones</legend>
  </div>
  <div id="table" class="table-responsive pl-3 pr-3">
    <table class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
      <thead class="thead-dark">
        <tr>
          <th style="border: 1px solid" scope="col">Días Totales</th>
          <th style="border: 1px solid" scope="col">Días Utilizados</th>
          <th style="border: 1px solid" scope="col">Días Disponibles:</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td id="total_days_th"     style="border: 1px solid"><%= @employee.total_vacations_days %></td>
          <td id="used_days_th"      style="border: 1px solid"><%= @employee.used_vacations_days %></td>
          <td id="available_days_th" style="border: 1px solid"><%= @employee.available_vacations_days %></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="row form_fieldset mb-4">
  <div  class="col-12 mt-4 mb-4">
    <legend>Agregar Vacaciones</legend>
  </div>
  <div class="col-12">
    <%= form_for(@employee, url: admin_edit_vacations_path(@employee), html: {multipart: true}) do |form| %>
      <div class="col-12">
        <div class="row tbl_row mt-4">
          <%= form.fields_for :vacations do |vacation| %>
            <%= render 'admin/employees/vacation_fields', f: vacation %>
          <%end%>
        </div>
        <div class="row tbl_row" style="border: none;">
          <div class="col-12 text-center p-2 tbl_footer mt-2">
            <%= link_to_add_association ' + Agregar Vacación', form, :vacations, data: { association_insertion_mode: '.vacation.fields', partial: 'vacation_fields'}, class: 'btn add_btn' %>
          </div>
          <%= form.submit "Guardar Vacaciones", id: 'btn_submit', class: "btn btn-success mt-4" %>
          <%= link_to('Cancelar', admin_employees_path, class: 'btn btn-light ml-sm-3 mt-4')%>
        </div>
      </div>
    <% end %>
  </div>
</div>